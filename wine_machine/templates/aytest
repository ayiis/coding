<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <style type="text/css">@import url("/css/gitlab.css");
    </style>
    <title>任务详情</title>
  </head>
  <body data-group="" data-page="profiles:accounts:show" data-project="" class="ui_blue">{% include './lib/header'%}
    <div class="page-with-new-sidebar page-with-sidebar">{% include './lib/nav-sidebar'%}
      <div class="content-wrapper page-with-new-nav">
        <div class="mobile-overlay"></div>
        <div class="alert-wrapper">
          <nav role="navigation" class="breadcrumbs container-fluid container-limited">
            <div class="breadcrumbs-container">
              <button name="button" type="button" class="toggle-mobile-nav"><span class="sr-only">Open sidebar</span><i aria-hidden="true" data-hidden="true" class="fa fa-bars"></i>
              </button>
              <div class="breadcrumbs-links js-title-container">
                <ul class="list-unstyled breadcrumbs-list js-breadcrumbs-list">
                  <li><a href="/account">Index</a>
                    <svg class="s8 breadcrumbs-list-angle">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/css/icons.svg#angle-right"></use>
                    </svg>
                  </li>
                  <li>
                    <h2 class="breadcrumbs-sub-title">aytest</h2>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div class="flash-container flash-container-page"></div>
        </div>
        <div class="container-fluid container-limited limit-container-width">
          <div id="content-body" class="content">
            <form role="form" enctype="multipart/form-data" action="##" accept-charset="UTF-8" method="post" class="prepend-top-default js-quick-submit">
              <div class="row">
                <div class="col-lg-4 profile-settings-sidebar">
                  <div class="checkbox-icon-inline-wrapper">
                    <div id="exectype" class="checkbox">
                      <label>
                        <input type="radio" name="exectype" value="shell" checked>Shell
                      </label>
                      <label>
                        <input type="radio" name="exectype" value="python">Python
                      </label>
                      <label>
                        <input type="radio" name="exectype" value="mongodb">MongoDB
                      </label><br>
                    </div>
                  </div>
                </div>
                <div class="col-lg-8">
                  <input id="code" type="text" value="pwd" name="code" class="form-control">
                </div>
              </div>
              <div class="row">
                <div class="col-lg-12">
                  <pre id="res_content" style="height:600px" class="col-xs-12"></pre>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>{% include './lib/bottom_script'%}
    <script>$('#code').on('keydown', function(event){
    if (event.keyCode == 13) {
        aysubmit();
        return event.preventDefault();
    }
});
function aysubmit() {
  var req_data = {
      'exectype': $('#exectype').find(':checked').val(),
      'code': $('#code').val(),
  };
  $.ajax({
      type: 'POST',
      contentType: 'application/json; charset=utf-8',
      url: '/api/aytest',
      data: JSON.stringify(req_data),
      dataType: 'json',
      success: function(res_data) {
          if (res_data.code == 200) {
              $('#res_content').empty().text(res_data.data);
          } else {
            $('#res_content').empty().text(res_data.desc);
          }
      },
      error: function(error) {
          console.log(error);
      }
  });
}
    </script>
  </body>
</html>