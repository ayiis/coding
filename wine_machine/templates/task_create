<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <style type="text/css">@import url("/css/gitlab.css");
    </style>
    <title>任务创建</title>
  </head>
  <body data-group="" data-page="profiles:accounts:show" data-project="" class="ui_blue">{% include './lib/header'%}
    <div class="page-with-new-sidebar page-with-sidebar">{% include './lib/nav-sidebar'%}
      <div class="content-wrapper page-with-new-nav">
        <div class="mobile-overlay"></div>
        <div class="alert-wrapper">
          <nav role="navigation" class="breadcrumbs container-fluid container-limited">
            <div class="breadcrumbs-container">
              <button name="button" type="button" class="toggle-mobile-nav"><span class="sr-only">Open sidebar</span><i aria-hidden="true" data-hidden="true" class="fa fa-bars"></i>
              </button>
              <div class="breadcrumbs-links js-title-container">
                <ul class="list-unstyled breadcrumbs-list js-breadcrumbs-list">
                  <li><a href="/account">Index</a>
                    <svg class="s8 breadcrumbs-list-angle">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/css/icons.svg#angle-right"></use>
                    </svg>
                  </li>
                  <li>
                    <h2 class="breadcrumbs-sub-title">任务创建</h2>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <div class="flash-container flash-container-page"></div>
        </div>
        <div class="container-fluid container-limited limit-container-width">
          <div id="content-body" class="content">
            <form id="edit_user_18" role="form" enctype="multipart/form-data" action="/api/task_create" accept-charset="UTF-8" method="post" class="edit-user prepend-top-default js-quick-submit">
              <div class="row">
                <div class="col-lg-4 profile-settings-sidebar">
                  <h4 class="prepend-top-0">创建新任务</h4>
                  <p>要求UTF8格式，任务文件样例见<a href="/file/example.txt" target="_blank"> example.txt</a>
                  </p>
                </div>
                <div class="col-lg-8">
                  <h5 class="prepend-top-0">上传文件</h5>
                  <div class="prepend-top-5 append-bottom-10">
                    <button id="select_task" type="button" class="btn js-choose-user-avatar-button">选择文件...</button><span class="avatar-file-name prepend-left-default js-avatar-filename">未选择文件</span>
                    <input id="task_file" accept="text/plain" type="file" name="task_file" class="js-user-avatar-input hidden">
                  </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-lg-4 profile-settings-sidebar">
                  <h4 class="prepend-top-0">任务名</h4>
                  <p>你可以为任务命名以方便管理</p>
                </div>
                <div class="col-lg-8">
                  <div class="form-group">
                    <label class="label-bold">输入名称</label>
                    <input id="task_name" required="required" type="text" value="" name="task_name" class="form-control">
                  </div>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-lg-4 profile-settings-sidebar">
                  <h4 class="prepend-top-0">任务设置</h4>
                  <p>控制任务周期，选择参与者等</p>
                </div>
                <div class="col-lg-8">
                  <div class="row">
                    <div class="form-group col-md-9">
                      <label class="label-bold">截止完成日期</label>
                      <input id="task_deadline" placeholder="YYYY-MM-DD" type="text" name="task_deadline" value="2020-01-01" class="datepicker form-control"><span class="help-block">到截止日期尚未提交任务的参与者视为未完成</span>
                    </div>
                    <div class="form-group col-md-3">
                      <label class="label-bold">分发比</label>
                      <input id="task_percent" readonly="readonly" type="text" value="100%" name="task_percent" class="form-control"><span class="help-block">默认分配全部文本</span>
                    </div>
                  </div>
                  <h5>选择参与者</h5>
                  <div class="checkbox-icon-inline-wrapper">
                    <div class="checkbox">
                      <label>
                        <input id="task_enable_user" type="checkbox" name="task_enable_user">用户
                      </label>
                      <label>
                        <input id="task_enable_admin" type="checkbox" name="task_enable_admin">管理员
                      </label><br>
                    </div>
                  </div>
                  <div class="checkbox-icon-inline-wrapper">
                    <div class="checkbox">
                      <select id="select_user_list" multiple="multiple" style="width: 100%" class="hidden"></select>
                    </div>
                  </div>
                  <div class="help-block">默认任务分发给学生，管理员只负责审核
                  </div>
                  <div class="prepend-top-default append-bottom-default">
                    <input id="btn_submit" type="submit" name="commit" value="创建任务" class="btn btn-success append-right-10"><span id="span_message" class="warning-title"></span>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>{% include './lib/bottom_script'%}
    <link href="/css/select2.min.css" rel="stylesheet">
    <script src="/js/select2.min.js"></script>
    <script src="/js/lib/task_create.js?ts={{handler.system_start_ts}}"></script>
    <script>window.task_create.init();
    </script>
  </body>
</html>