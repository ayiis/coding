doctype html
html
    head
        meta(charset='UTF-8')
        style(type='text/css').
            @import url("/css/gitlab.css");
        title 任务创建
    body.ui_blue(data-group='', data-page='profiles:accounts:show', data-project='')
        | {% include './lib/header'%}
        .page-with-new-sidebar.page-with-sidebar
            | {% include './lib/nav-sidebar'%}
            .content-wrapper.page-with-new-nav
                .mobile-overlay
                .alert-wrapper
                    nav.breadcrumbs.container-fluid.container-limited(role='navigation')
                        .breadcrumbs-container
                            button.toggle-mobile-nav(name='button', type='button')
                                span.sr-only Open sidebar
                                i.fa.fa-bars(aria-hidden='true', data-hidden='true')
                            .breadcrumbs-links.js-title-container
                                ul.list-unstyled.breadcrumbs-list.js-breadcrumbs-list
                                    li
                                        a(href='/account') Index
                                        svg.s8.breadcrumbs-list-angle
                                            use(xmlns:xlink='http://www.w3.org/1999/xlink', xlink:href='/css/icons.svg#angle-right')
                                    li
                                        h2.breadcrumbs-sub-title 任务创建
                    .flash-container.flash-container-page
                .container-fluid.container-limited.limit-container-width
                  #content-body.content
                    form#edit_user_18.edit-user.prepend-top-default.js-quick-submit(role='form', enctype='multipart/form-data', action='/api/task_create', accept-charset='UTF-8', method='post')
                      .row
                        .col-lg-4.profile-settings-sidebar
                          h4.prepend-top-0 创建新任务
                          p 要求UTF8格式，任务文件样例见
                            a(href='/file/example.txt',target='_blank')
                              |  example.txt
                        .col-lg-8
                          h5.prepend-top-0 上传文件
                          .prepend-top-5.append-bottom-10
                            button#select_task.btn.js-choose-user-avatar-button(type='button') 选择文件...
                            span.avatar-file-name.prepend-left-default.js-avatar-filename 未选择文件
                            input#task_file.js-user-avatar-input.hidden(accept='text/plain', type='file', name='task_file')
                      hr
                      .row
                        .col-lg-4.profile-settings-sidebar
                          h4.prepend-top-0 任务名
                          p 你可以为任务命名以方便管理
                        .col-lg-8
                          .form-group
                            label.label-bold 输入名称
                            input#task_name.form-control(required='required', type='text', value='', name='task_name')
                      hr
                      .row
                        .col-lg-4.profile-settings-sidebar
                          h4.prepend-top-0 任务设置
                          p 控制任务周期，选择参与者等
                        .col-lg-8
                          .row
                            .form-group.col-md-9
                              label.label-bold 截止完成日期
                              input#task_deadline.datepicker.form-control(placeholder='YYYY-MM-DD', type='text', name='task_deadline', value='2020-01-01')
                              span.help-block 到截止日期尚未提交任务的参与者视为未完成
                            .form-group.col-md-3
                              label.label-bold 分发比
                              input#task_percent.form-control(readonly='readonly', type='text', value='100%', name='task_percent')
                              span.help-block 默认分配全部文本
                          h5 选择参与者
                          .checkbox-icon-inline-wrapper
                            .checkbox
                              label
                                input#task_enable_user(type='checkbox', name='task_enable_user')
                                | 用户
                              label
                                input#task_enable_admin(type='checkbox', name='task_enable_admin')
                                | 管理员
                              br
                          .checkbox-icon-inline-wrapper
                            .checkbox
                              select#select_user_list.hidden(multiple='multiple', style='width: 100%')
                          .help-block
                            | 默认任务分发给学生，管理员只负责审核
                          .prepend-top-default.append-bottom-default
                            input#btn_submit.btn.btn-success.append-right-10(type='submit', name='commit', value='创建任务')
                            span#span_message.warning-title
        | {% include './lib/bottom_script'%}
        link(href='/css/select2.min.css', rel='stylesheet')
        script(src='/js/select2.min.js')
        script(src='/js/lib/task_create.js?ts={{handler.system_start_ts}}')
        script.
          window.task_create.init();
